"use strict";const idContainer=document.querySelector(".adviceId__id"),adviceContainer=document.querySelector(".adviceContent"),adviceContent=document.querySelector(".adviceContent__text"),errorMessage=document.querySelector(".error__message"),button=document.querySelector(".btn"),loadingAnimation=document.querySelector(".loading"),timeOutSec=5,timeout=function(t){return new Promise((function(e,n){setTimeout((function(){n(new Error(`Request took too long! Timeout after ${t} second`))}),1e3*t)}))},state={id:0,advice:""},newAdvice=async function(){try{const e=await Promise.race([fetch("https://api.adviceslip.com/advice"),(t=5,new Promise((function(e,n){setTimeout((function(){n(new Error(`Request took too long! Timeout after ${t} second`))}),1e3*t)})))]),n=await e.json();if(!e.ok)throw new Error(`${n.message} (${e.status})`);const{slip:o}=n;state.id=o.id,state.advice=o.advice}catch(t){throw t}var t},init=function(){button.addEventListener("click",(async function(t){try{if(!t.target.closest(".btn"))return;errorMessage.style.display="none",loadingAnimation.style.opacity=1,adviceContainer.style.opacity=0,await newAdvice(),idContainer.textContent=state.id,adviceContent.style.display="block",adviceContent.textContent=`‚Äù ${state.advice} ‚Äù`,loadingAnimation.style.opacity=0,adviceContainer.style.opacity=1}catch(t){errorMessage.style.display="block",adviceContent.style.display="none",loadingAnimation.style.opacity=0,adviceContainer.style.opacity=1,console.error(`${t} üí•üí•üí•`)}}))};button.addEventListener("click",(async function(t){try{if(!t.target.closest(".btn"))return;errorMessage.style.display="none",loadingAnimation.style.opacity=1,adviceContainer.style.opacity=0,await newAdvice(),idContainer.textContent=state.id,adviceContent.style.display="block",adviceContent.textContent=`‚Äù ${state.advice} ‚Äù`,loadingAnimation.style.opacity=0,adviceContainer.style.opacity=1}catch(t){errorMessage.style.display="block",adviceContent.style.display="none",loadingAnimation.style.opacity=0,adviceContainer.style.opacity=1,console.error(`${t} üí•üí•üí•`)}}));
//# sourceMappingURL=index.3dd46232.js.map
